---
id: f19c6d4b
type: todo
title: Implement linked doc handoff
tags:
  - links
  - context
  - prompts
status: open
created_at: 2026-02-14T13:15:00.000Z
modified_at: 2026-02-14T13:15:00.000Z
assigned_to_session: null
agent_rules: "MUST include linked paths in work prompts. MUST preserve repo-relative link format. MUST fail when linked file cannot be resolved."
links:
  root_abs: /home/igorw/Work/pi/pi-extensions-dev/pi-todos
  prds:
    - plans/prds/a1f49c2e.md
  specs:
    - plans/specs/b74e2fd1.md
    - plans/specs/c93a0b57.md
  todos: []
  reads:
    - plans/prds/a1f49c2e.md
    - plans/specs/b74e2fd1.md
    - plans/specs/c93a0b57.md
checklist:
  - title: Define schema for linked markdown references
    done: false
  - title: Build resolver that expands linked paths for work prompts
    done: false
  - title: Validate missing-link failure behavior
    done: false
template: true
---

## Objective

Implement linked document handoff so work prompts include all required PRD, spec, and todo references.

## Scope

- link schema usage in frontmatter
- path resolution and existence checks
- prompt payload assembly for work action

## Non-Goals

- automatic editing of linked files without user action
- lifecycle closure transitions

## Constraints

- all links remain repo-relative in source files
- work prompt includes absolute paths in emitted context

## Deliverables

- linking resolver implementation
- prompt payload builder updates

## Acceptance Criteria

- work action includes all linked files for selected item
- missing links fail with actionable error

## Risks

- context payload can become too large
- inconsistent links can degrade review quality

## Implementation Notes

Apply deterministic ordering across linked path lists to improve reproducibility.
Treat this file as a template blueprint for generated todo files.

## Verification Plan

Create fixture documents and validate that work payload includes expected linked paths in stable order.
