{
  "id": "bf253c3e",
  "title": "[Phase 0] Format change: LINE:HASH|content (2-char hex)",
  "tags": [
    "pi-hash",
    "phase-0",
    "format",
    "breaking-change"
  ],
  "status": "closed",
  "created_at": "2026-02-12T21:37:53.762Z",
  "assigned_to_session": "5d994b6f-5c75-4f28-8a94-ed305756b8c1"
}

## Completed

Phase 0 format change from `LINEHASH|content` to `LINE:HASH|content` has been implemented.

### Changes Made

1. **`src/shared/hash.ts`** - New hash function:
   - 2-char hex output (256 possible values)
   - Uses xxHash32 (Bun) or FNV-1a fallback (Node)
   - Empty line: `"00"`

2. **`src/parser.ts`** - Updated regex:
   - `/^(\d+):([0-9a-f]{2})\|(.*)$/`
   - Error messages use `'42:ab|content'`

3. **`src/read/executor.ts`** - Output format:
   - `${lineNo}:${hash}|${content}`

4. **`src/apply.ts`** - Anchor display in all functions

5. **`src/parse-recovery.ts`** - Error recovery

6. **`index.ts`** - Tool description

### Verification

Tests passed:
- Empty line hash: "00" ✓
- Whitespace invariance: ✓
- Case sensitivity: ✓
